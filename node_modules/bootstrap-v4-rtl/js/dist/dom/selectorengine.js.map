{"version":3,"file":"selectorengine.js","sources":["../../src/dom/selectorEngine.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.3.1): dom/selectorEngine.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport Polyfill from './polyfill'\nimport Util from '../util'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst findFn = Polyfill.find\nconst findOne = Polyfill.findOne\nconst NODE_TEXT = 3\n\nconst SelectorEngine = {\n  matches(element, selector) {\n    return element.matches(selector)\n  },\n\n  find(selector, element = document.documentElement) {\n    if (typeof selector !== 'string') {\n      return null\n    }\n\n    return findFn.call(element, selector)\n  },\n\n  findOne(selector, element = document.documentElement) {\n    if (typeof selector !== 'string') {\n      return null\n    }\n\n    return findOne.call(element, selector)\n  },\n\n  children(element, selector) {\n    if (typeof selector !== 'string') {\n      return null\n    }\n\n    const children = Util.makeArray(element.children)\n\n    return children.filter((child) => this.matches(child, selector))\n  },\n\n  parents(element, selector) {\n    if (typeof selector !== 'string') {\n      return null\n    }\n\n    const parents = []\n    let ancestor = element.parentNode\n\n    while (ancestor && ancestor.nodeType === Node.ELEMENT_NODE && ancestor.nodeType !== NODE_TEXT) {\n      if (this.matches(ancestor, selector)) {\n        parents.push(ancestor)\n      }\n\n      ancestor = ancestor.parentNode\n    }\n\n    return parents\n  },\n\n  closest(element, selector) {\n    if (typeof selector !== 'string') {\n      return null\n    }\n\n    return element.closest(selector)\n  },\n\n  prev(element, selector) {\n    if (typeof selector !== 'string') {\n      return null\n    }\n\n    const siblings = []\n    let previous = element.previousSibling\n\n    while (previous && previous.nodeType === Node.ELEMENT_NODE && previous.nodeType !== NODE_TEXT) {\n      if (this.matches(previous, selector)) {\n        siblings.push(previous)\n      }\n\n      previous = previous.previousSibling\n    }\n\n    return siblings\n  }\n}\n\nexport default SelectorEngine\n"],"names":["findFn","Polyfill","find","findOne","NODE_TEXT","SelectorEngine","matches","element","selector","document","documentElement","call","children","Util","makeArray","filter","child","parents","ancestor","parentNode","nodeType","Node","ELEMENT_NODE","push","closest","prev","siblings","previous","previousSibling"],"mappings":"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"}