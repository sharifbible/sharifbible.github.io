{"version":3,"file":"polyfill.js","sources":["../../src/dom/polyfill.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.3.1): dom/polyfill.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport Util from '../util'\n\n/* istanbul ignore next */\nconst Polyfill = (() => {\n  // MSEdge resets defaultPrevented flag upon dispatchEvent call if at least one listener is attached\n  const defaultPreventedPreservedOnDispatch = (() => {\n    const e = new CustomEvent('Bootstrap', {\n      cancelable: true\n    })\n\n    const element = document.createElement('div')\n    element.addEventListener('Bootstrap', () => null)\n\n    e.preventDefault()\n    element.dispatchEvent(e)\n    return e.defaultPrevented\n  })()\n\n  let find = Element.prototype.querySelectorAll\n  let findOne = Element.prototype.querySelector\n\n  const scopeSelectorRegex = /:scope\\b/\n  const supportScopeQuery = (() => {\n    const element = document.createElement('div')\n\n    try {\n      element.querySelectorAll(':scope *')\n    } catch (e) {\n      return false\n    }\n\n    return true\n  })()\n\n  if (!supportScopeQuery) {\n    find = function (selector) {\n      if (!scopeSelectorRegex.test(selector)) {\n        return this.querySelectorAll(selector)\n      }\n\n      const hasId = Boolean(this.id)\n\n      if (!hasId) {\n        this.id = Util.getUID('scope')\n      }\n\n      let nodeList = null\n      try {\n        selector = selector.replace(scopeSelectorRegex, `#${this.id}`)\n        nodeList = this.querySelectorAll(selector)\n      } finally {\n        if (!hasId) {\n          this.removeAttribute('id')\n        }\n      }\n\n      return nodeList\n    }\n\n    findOne = function (selector) {\n      if (!scopeSelectorRegex.test(selector)) {\n        return this.querySelector(selector)\n      }\n\n      const matches = find.call(this, selector)\n\n      if (typeof matches[0] !== 'undefined') {\n        return matches[0]\n      }\n\n      return null\n    }\n  }\n\n  return {\n    defaultPreventedPreservedOnDispatch,\n    find,\n    findOne\n  }\n})()\n\nexport default Polyfill\n"],"names":["Polyfill","defaultPreventedPreservedOnDispatch","e","CustomEvent","cancelable","element","document","createElement","addEventListener","preventDefault","dispatchEvent","defaultPrevented","find","Element","prototype","querySelectorAll","findOne","querySelector","scopeSelectorRegex","supportScopeQuery","selector","test","hasId","Boolean","id","Util","getUID","nodeList","replace","removeAttribute","matches","call"],"mappings":";;;;;;;;;;;;;EAAA;;;;;;AAOA,EAEA;;EACA,IAAMA,QAAQ,GAAI,YAAM;EACtB;EACA,MAAMC,mCAAmC,GAAI,YAAM;EACjD,QAAMC,CAAC,GAAG,IAAIC,WAAJ,CAAgB,WAAhB,EAA6B;EACrCC,MAAAA,UAAU,EAAE;EADyB,KAA7B,CAAV;EAIA,QAAMC,OAAO,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAhB;EACAF,IAAAA,OAAO,CAACG,gBAAR,CAAyB,WAAzB,EAAsC;EAAA,aAAM,IAAN;EAAA,KAAtC;EAEAN,IAAAA,CAAC,CAACO,cAAF;EACAJ,IAAAA,OAAO,CAACK,aAAR,CAAsBR,CAAtB;EACA,WAAOA,CAAC,CAACS,gBAAT;EACD,GAX2C,EAA5C;;EAaA,MAAIC,IAAI,GAAGC,OAAO,CAACC,SAAR,CAAkBC,gBAA7B;EACA,MAAIC,OAAO,GAAGH,OAAO,CAACC,SAAR,CAAkBG,aAAhC;EAEA,MAAMC,kBAAkB,GAAG,UAA3B;;EACA,MAAMC,iBAAiB,GAAI,YAAM;EAC/B,QAAMd,OAAO,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAhB;;EAEA,QAAI;EACFF,MAAAA,OAAO,CAACU,gBAAR,CAAyB,UAAzB;EACD,KAFD,CAEE,OAAOb,CAAP,EAAU;EACV,aAAO,KAAP;EACD;;EAED,WAAO,IAAP;EACD,GAVyB,EAA1B;;EAYA,MAAI,CAACiB,iBAAL,EAAwB;EACtBP,IAAAA,IAAI,GAAG,cAAUQ,QAAV,EAAoB;EACzB,UAAI,CAACF,kBAAkB,CAACG,IAAnB,CAAwBD,QAAxB,CAAL,EAAwC;EACtC,eAAO,KAAKL,gBAAL,CAAsBK,QAAtB,CAAP;EACD;;EAED,UAAME,KAAK,GAAGC,OAAO,CAAC,KAAKC,EAAN,CAArB;;EAEA,UAAI,CAACF,KAAL,EAAY;EACV,aAAKE,EAAL,GAAUC,IAAI,CAACC,MAAL,CAAY,OAAZ,CAAV;EACD;;EAED,UAAIC,QAAQ,GAAG,IAAf;;EACA,UAAI;EACFP,QAAAA,QAAQ,GAAGA,QAAQ,CAACQ,OAAT,CAAiBV,kBAAjB,QAAyC,KAAKM,EAA9C,CAAX;EACAG,QAAAA,QAAQ,GAAG,KAAKZ,gBAAL,CAAsBK,QAAtB,CAAX;EACD,OAHD,SAGU;EACR,YAAI,CAACE,KAAL,EAAY;EACV,eAAKO,eAAL,CAAqB,IAArB;EACD;EACF;;EAED,aAAOF,QAAP;EACD,KAtBD;;EAwBAX,IAAAA,OAAO,GAAG,iBAAUI,QAAV,EAAoB;EAC5B,UAAI,CAACF,kBAAkB,CAACG,IAAnB,CAAwBD,QAAxB,CAAL,EAAwC;EACtC,eAAO,KAAKH,aAAL,CAAmBG,QAAnB,CAAP;EACD;;EAED,UAAMU,OAAO,GAAGlB,IAAI,CAACmB,IAAL,CAAU,IAAV,EAAgBX,QAAhB,CAAhB;;EAEA,UAAI,OAAOU,OAAO,CAAC,CAAD,CAAd,KAAsB,WAA1B,EAAuC;EACrC,eAAOA,OAAO,CAAC,CAAD,CAAd;EACD;;EAED,aAAO,IAAP;EACD,KAZD;EAaD;;EAED,SAAO;EACL7B,IAAAA,mCAAmC,EAAnCA,mCADK;EAELW,IAAAA,IAAI,EAAJA,IAFK;EAGLI,IAAAA,OAAO,EAAPA;EAHK,GAAP;EAKD,CA5EgB,EAAjB;;;;;;;;"}